{% load static %}
 <title>{% block titulo %}Lista de agendamientos {% endblock titulo %}</title>
{% include "../header.html" %}
    {% include "nav.html" %}
     
     <div class="table-responsive mt-4" style="margin-top:25px;padding:50px !important">
       <a href="/nuevo-agendamiento/" class="btn btn-primary mb-4"
                >CREAR AGENDAMIENTO</a
              >
        <table class="table table-striped table-advance table-hover " style="width:100%" id="datatable">
            <thead class="text-uppercase bg-info">
                <tr class="text-white">
                    <th class="text-center">Agendamiento</th>
                    <th class="text-center">Tipo Agendamiento</th>
                    <th class="text-center">Fecha instalacion</th>
                    <th class="text-center">Costo Adicional</th>
                    <th class="text-center">Detalles Agendamiento</th>   
                    <th class="text-center"> Estado Agendamiento</th>   
                                
                    <th class="text-center"><i class="fas fa-cog"></i></th>
                </tr>
            </thead>
            <tbody>
              {% if lista_agendamientos %}
              
  {% if user.last_name == "Tecnico" %}
                {% for p in lista_agendamientos %}              
                <tr>
                    <td class="text-center">{{p.cliente}}</td>
                    <td class="text-center">{{p.tipo_agendamiento}}</td>
                    <td class="text-center">{{p.fecha_instalacion}}</td>
                    <td class="text-center">{{p.costo_adicional}}</td>
                    <td class="text-center">{{p.detalles_agendamiento}}</td>
                    <td class="text-center">
                     <div class="col">
                 {% if agendamiento.estado_agendamiento == False %}
                  <p class="card-text">Sin Atender</p>
                 {% else %}
                  <p class="card-text">Atendido</p>
                 
                 {% endif %}
                </div>
                    </td>
                   
                    <td class="text-center">
                        <div class="btn-group">
                        
              
             
                  <a
                    href="/editar-agendamiento/{{p.id}}"
                    class="btn btn-primary btn-sm"
                    >EDITAR AGENDAMIENTO</a
                  >
                  <a
                    href="/eliminar-agendamiento/{{p.id}}"
                    class="btn btn-danger btn-sm"
                    >ELIMINAR AGENDAMIENTO</a
                  >
              
                        </div>
                    </td> 
                </tr>
                {% endfor %}
                {% elif user.last_name == "Meganet" %}
                  {% for p in lista_agendamientos %}       
                 <tr>
                    <td class="text-center">{{p.cliente}}</td>
                    <td class="text-center">{{p.tipo_agendamiento}}</td>
                    <td class="text-center">{{p.fecha_instalacion}}</td>
                    <td class="text-center">{{p.costo_adicional}}</td>
                    <td class="text-center">{{p.detalles_agendamiento}}</td>
                    <td class="text-center">
                     <div class="col">
                  
                 {% if p.estado_agendamiento == False %}
                  <p class="card-text">Sin Atender</p>
                 {% else %}
                  <p class="card-text">Atendido</p>
                 
                 {% endif %}
                </div>
                    </td>
                   
                    <td class="text-center">
                        <div class="btn-group">
                        
              
             
                  <a
                    href="/editar-agendamiento/{{p.id}}"
                    class="btn btn-primary btn-sm"
                    >EDITAR AGENDAMIENTO</a
                  >
                  <a
                    href="/eliminar-agendamiento/{{p.id}}"
                    class="btn btn-danger btn-sm"
                    >ELIMINAR AGENDAMIENTO</a
                  >
              
                        </div>
                    </td> 
                </tr>
               {% endfor %}
                {% endif %}
                {% if user.last_name == "Tecnico" %}
                {% for p in lista_agendamientos %}              
                <tr>
                    <td class="text-center">{{p.cliente}}</td>
                    <td class="text-center">{{p.tipo_agendamiento}}</td>
                    <td class="text-center">{{p.fecha_instalacion}}</td>
                    <td class="text-center">{{p.costo_adicional}}</td>
                    <td class="text-center">{{p.detalles_agendamiento}}</td>
                    <td class="text-center">
                     <div class="col">
                 {% if agendamiento.estado_agendamiento == False %}
                  <p class="card-text">Sin Atender</p>
                 {% else %}
                  <p class="card-text">Atendido</p>
                 
                 {% endif %}
                </div>
                    </td>
                   
                    <td class="text-center">
                        <div class="btn-group">
                        
              
             
                  <a
                    href="/editar-agendamiento/{{p.id}}"
                    class="btn btn-primary btn-sm"
                    >EDITAR AGENDAMIENTO</a
                  >
                  <a
                    href="/eliminar-agendamiento/{{p.id}}"
                    class="btn btn-danger btn-sm"
                    >ELIMINAR AGENDAMIENTO</a
                  >
              
                        </div>
                    </td> 
                </tr>
                {% endfor %}
                {% elif user.last_name == "Secretaria" %}
                  {% for p in lista_agendamientos %}       
                 <tr>
                    <td class="text-center">{{p.contrato}}</td>
                    <td class="text-center">{{p.tipo_agendamiento}}</td>
                    <td class="text-center">{{p.fecha_instalacion}}</td>
                    <td class="text-center">{{p.costo_adicional}}</td>
                    <td class="text-center">{{p.detalles_agendamiento}}</td>
                    <td class="text-center">
                     <div class="col">
                 {% if agendamiento.estado_agendamiento == False %}
                  <p class="card-text">Sin Atender</p>
                 {% else %}
                  <p class="card-text">Atendido</p>
                 
                 {% endif %}
                </div>
                    </td>
                   
                    <td class="text-center">
                        <div class="btn-group">
                        
              
             
                  <a
                    href="/editar-agendamiento/{{p.id}}"
                    class="btn btn-primary btn-sm"
                    >EDITAR AGENDAMIENTO</a
                  >
                  <a
                    href="/eliminar-agendamiento/{{p.id}}"
                    class="btn btn-danger btn-sm"
                    >ELIMINAR AGENDAMIENTO</a
                  >
              
                        </div>
                    </td> 
                </tr>
               {% endfor %}
                {% endif %}
                 {% else %}
                <h1>No hay registro de Agendamientos </h1>
              {% endif %}
              
                <br>
            </tbody>
        </table>
    </div>

{% include "../footer.html" %}

 <script>
    $(document).ready( function () {
        $('#datatable').DataTable( {
          "aLengthMenu": [[5, 10, 15, -1], [5, 10, 15, "All"]],
          "language": {
            "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json",
            "lengthMenu": "Mostrar _MENU_ ",
            "zeroRecords": "Registro no encontrado",
            "info": "Mostrando p√°gina _PAGE_ de _PAGES_",
            "infoEmpty": "No hay registros disponibles",
            "infoFiltered": "(filtered from _MAX_ registros totales)",
            "pagingType": "full_numbers",
            "search": "Buscar:",            
          }
      } );
    } );
</script>
  </body>
</html>